function [y1] = fj_VOV2_final(x1)
%FJ_VOV2_FINAL neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2019 18:07:08.
% 
% [y1] = fj_VOV2_final(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% With 
%   Row 1: Outdoor temperature in Celsius
%   Row 2: Month [1-12]
%   Row 3: Workday or non-workday [1 = workday, 0 = non-workday] 
%   Row 4: Time of day [1-24, with 24 = 00 is treated as the start of the
%          year, i.e., the first hour of the year has value 24. This since
%          the logged value for that time is primarly between 23 -24 the
%          day before]
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-12;0;0;1];
x1_step1.gain = [0.0441501103752759;0.166666666666667;2;0.0869565217391304];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.472971054259915924;-4.7001903518098195889;4.6558206044848722271;-4.7370842693341623786;4.6813511233325648675;-4.9894752742793500033;-4.4065241377555297575;-4.1543897243324847679;4.3436102193091823409;-4.3448084587507596055;-3.9719394485487802271;4.2569770444414229971;4.1148091173400516141;-3.9862564059770004832;-3.9225465028638968334;-3.5908495703886980088;3.457776359591561377;3.8517514520391147315;-3.3918404623531750453;3.6083417038968437218;-3.3591125544655042745;-3.836882231775492258;2.7634261853160713152;3.585395468568882027;2.6876510396375419276;-2.9822591587486106945;-2.9392333796971672477;2.5391164688979781516;-2.9675158549474209835;-2.8116632823088760773;-2.4609629430399984074;2.6957005598794032686;2.6923758719517221216;2.9460084955264851381;-1.8292310221107432877;2.1566938379074662713;-1.5774710362254724672;2.3050146682239902596;-2.2358767010466671366;1.8868059556150986733;1.6155219324012368709;1.0837251255298814279;1.9001404283369736081;-1.6337603222804306657;-1.7477406851738122029;2.1866675475576098364;1.0499316350887193394;-1.1683572773304833348;1.1677403361470755083;1.2224704140379896167;-1.5904961115481166534;-1.1292479588070840624;-1.065624662957694424;1.3892587872095152335;-1.5215347372277985283;1.2754158325453051059;0.88101418638043393905;-0.84204343660464897603;0.46502205787367639767;0.25786961466133739851;0.49953897446741141186;0.53212202595844648734;-1.1397769316776109605;-0.56095820019839504056;0.095580244044817047611;1.0646665569891724523;-0.39445483483473486874;-0.49595244677538274924;0.12059624595471367392;0.57544037099380263012;0.041768891112941589072;-0.45623478595237398903;0.11733190849891098062;-0.23600683838485508881;0.60486981724152977247;-0.55228297030560646874;-0.83067986246412972573;0.84566021812735292507;-0.1187721535264458228;-0.64041738792178493078;0.8272956565467126655;-0.96987082170620952937;-0.95113157535336767534;-1.1026412934694784784;-1.4696687127563807795;1.205663398848155099;1.168001289521617414;0.99725494728543528922;-0.66104081168668049617;1.2772926322727757853;-1.6835725820129037178;-1.3504717070900711384;1.4623587383329101907;-1.8646011091382950209;-1.8306200940222492335;1.6515931901291365236;1.8439241138126314379;-0.77840225281553887537;-2.2722917339852664043;-2.0040227261489289567;1.6127289736490855176;2.1669610424756786671;-2.9578367322568990261;1.9929786698868225958;2.9132044748505760978;-2.5554457673371357984;-2.3200607723435555663;-3.138818523747692435;2.9852971268099954827;-3.8528909448410262328;3.2745854256964639362;-3.3441951086561472195;3.1218922868000098525;3.4373734636934671904;3.5569592816109403266;3.0607892265787217667;-2.7523713472258317658;3.0740710519578451354;3.3806944025831673351;-3.3365827465688746578;-3.6289546240894314799;-4.1989198749200324912;3.6287732500990173001;-3.63351120872199429;3.792398789085194899;3.7552851879775475119;-4.3630986002874720953;4.0722429933944308544;4.2722930025257612741;-3.8219133010806438655;4.1818192701914558285;-4.12241307566652182;-4.3783572523349816308;-4.4993862149406051998;4.6912488965193981372;-4.4555197541694502306;4.2834230543073150699;-4.4952377612298031195;5.3544648291210261704;5.032344958320735806];
IW1_1 = [1.1889216128907540426 -4.0525385499120725186 2.9745006193768905867 0.78633408138432925316;1.8450391519038664701 2.6822624860434807204 -3.7369194968755450326 0.651782080873910874;-3.7378215122223994449 1.2224298278378049609 -2.4287682719144676469 -0.40901636016702347387;1.3938081601422498412 2.2289217153848590591 -2.583261531231524355 2.8249504661014799289;-1.1621807902089382747 -1.6701667895551592924 4.3577368155630402669 1.37619744702997715;3.0121483220386577884 -2.4331719676838545752 1.4082740527172556977 1.5151819239509263237;-0.0026128266777308561952 -3.752256972998397444 -3.0087812085128455841 0.060059829632184612291;-0.17307335017025010648 -4.508774971255022912 1.414367749348004466 1.3832380976432085973;-1.9566526999864768399 1.3860227766288761853 -0.1297411049457546095 3.9773297969672762875;2.6866068924355595016 -3.0243530242137830477 2.2396661636057841882 -0.54112908389737091053;3.304088502663539817 2.9698465721078606272 -1.4698994935833711306 1.519841904577636571;-1.411224533951312532 -1.5473093952894150238 -3.7576823939788330797 1.8673879380858151578;-1.139352935259748234 1.0094496014790679261 2.9531204185045827337 3.3852697697559244183;0.75380704802610565274 -1.5671203112186884443 4.1210189054646253481 2.317351091677731123;2.1697750620745548389 -3.825058513954191497 0.16455277073881421912 1.4166835952237757379;2.2799488297413734728 3.5019560423528237614 -2.5070928850397784515 -1.1289573822154062022;-0.48532413794529527529 -1.7327400322739707761 -4.4121760225801684996 1.5512722084890819829;-0.64042281824026681125 -0.18767506599119146427 -3.031692598546088302 4.3132663508143957998;2.522814571640238146 2.4503520943506367225 -3.611752065064836259 -1.1766657425167090789;-3.0260243471239181012 -2.4141059373024611467 1.9604029110883893772 -1.6956708772971738064;3.1599914829545321382 -4.1322521609719684577 -1.9102479551053657136 0.0019044241387916470594;0.25822162914456059379 1.6834601459685525349 2.7225088023808932114 -2.9449788414580404527;-3.4865384054089774146 2.1266459741179879472 -3.6127522245017607005 -0.15978450748064684794;-2.3290174783116199819 0.90709679978971513581 3.0658868538521328873 2.5830166993684278154;-1.1538671578831642961 0.31473595609957638608 0.12827398494037933752 -4.7173682312071507639;4.8740187250943387554 -0.41032460017661687157 -2.4170800133868697301 0.4292039827639054228;1.3187042454878301623 2.7063933709277554485 0.63926383722238777629 -3.0415024869248838968;-3.1668954207123189981 -0.81493377786789089612 -4.0067701959493131625 0.67851326107028275825;3.2698243358207133014 1.2542839865771882035 -3.5731882645247918795 0.35108970277565199059;4.3754852658212044503 0.86242329050371624444 -0.76251919965254588707 -1.5458714104185788951;3.4022234696103610396 -2.6142501544836038718 -2.3313881201546275967 -0.23849116289396357637;-0.98870755331061510596 -4.0685856091411567448 -2.3762777051397492301 -0.53384752889908593243;-1.7829850946377869825 -0.71139559249180306377 -3.060575666252378646 3.0958423734101390146;-0.84260131536377147476 3.1356648847303212335 -0.99129065082973721879 -2.9629797880994952486;0.47637658315097453077 -3.2770636913539439306 -3.3920554259034592093 1.4064300640984970237;-2.8530871364060201856 -0.44703145951690087534 -3.4874360276404319237 2.023578380864798465;4.4760814503189827462 -1.8186335818612622273 -1.0835136074345563806 0.74959442755020444515;-0.55438804783287809475 -0.97808187997666917735 -4.6469014855334949132 0.48061767903173174821;3.1939766696372520194 -2.2012947281085946116 0.8725581265702104794 3.0127237478924460135;-0.92323135350281415601 0.4569079007174357554 3.6866680322083400512 2.7909599385123549098;0.052400867710140540401 -3.4583027638173895468 0.23818765707859282377 -3.0954800078572439759;-0.26453666361831784659 2.7579091402038709013 2.0843934862624169391 3.7986049966082795493;-3.3331177196955392716 -2.4895734519216978775 2.7474197151104680081 -1.2665498648908375401;-0.6138699134562817239 0.1747458805103354329 3.4699836552309313298 -3.1453278440975136476;1.2764181591003773697 -1.5290920037799411446 1.3478261451168851437 -4.2388896958560593475;-3.0331794227205484127 1.391850770545701943 -0.99513112450859075864 -2.980213898947125184;-0.7072926781979658184 -1.5808268237625364705 2.6486366638395573148 3.9110905215304234694;0.32015607111821575703 3.1703163747340683543 -2.5405697935922759712 1.206366775278021608;-1.2969412288932589128 -3.9498176380317611134 2.9891003051866107398 -1.5493983021638664255;-4.3511231332824866769 0.56860303355080676901 -0.89353441327401139649 1.7225336550853569406;1.7011214711917583831 2.0831424845627135589 3.0474551337872508583 2.442901139016199874;1.9338545185948421423 2.0325506814049916215 0.46350077578545900714 -3.9328265520077310136;0.94116749985228842501 -3.0792514576885383626 -2.8669745220600995061 -0.77545819897037204793;-0.057458829253291529571 1.5800105329862472736 3.7566245309735881719 2.240219306839844382;2.4770728431782882417 1.0687479007266933451 2.7908986923802561186 -2.4195327324361679544;-3.8298217815057880031 -2.8769095031083971037 2.6323500420778866982 -0.15082438823013302742;0.062062723501021488381 -3.2392350570635253248 -2.6111084195732918722 3.2198378779882981249;0.78099225060085375461 1.0374950346401317081 4.2505277067123996559 -2.6969918663377541179;-4.1514048041948772294 0.31682725689545199188 3.1460044439190602006 -0.45224289998555594616;-2.5001774768018365513 -3.6477790924335109501 -0.95454115869128708383 -1.4222820234982336274;-3.4418687515128358889 -2.7562921686066750304 0.74963980353418213642 -1.1776764785186490947;-2.5098649404143329456 -2.2107510818511340034 3.2664571855774342524 -1.6142491165955674681;0.42822989179373277535 4.5393508596013631973 -0.91822965556951119392 -0.13347381462595017676;1.226703606474946584 0.083572369646340197158 1.5257139454587025362 4.1158040244281375308;0.33140792255022644142 -2.6087089260944451574 3.1336672599188624133 -2.4248133825598006119;-0.4375963409082415656 3.4089207875801093017 -1.2155031558675575276 3.4837745920873244287;1.2257692912913780159 -4.4536326438819573426 -0.32550970978502546949 0.78365562487786777357;-0.043047712883835673181 -1.8324076845768813016 3.4035449037842058218 2.9427400515713819651;2.4069265758320503856 -2.8992403985935260025 2.5443074216238947827 1.436469845662100342;-1.9580032209795634746 3.9397485407704539995 -3.1175099808706669968 -0.06336490425508359281;-2.5890393044953547985 -2.7765125231843490461 2.4305132255900372407 -1.4910628904147378293;-2.7453117006561846836 0.48394887799489660907 2.8124965483078354644 3.5689046346474619931;-2.2064043254452596621 -1.8335088734685867085 -0.14118602092568291462 3.750623535374639328;-2.066524527840291281 -2.5507829194675886164 2.7061817649844011058 3.1946059314495109938;1.1841583855410575676 -0.14765109626747521809 -3.9770512157433879352 2.5053133077729037304;-2.8881873513507754225 2.1326169484394075226 -1.9150259182269477876 0.72981162461437065758;-3.0613397997636981884 -2.1689971875039217863 -2.5211059498990948669 -1.5313043403927495412;0.82510243149591133704 3.8849281966945885536 -1.4873599496711524814 -2.4563374417777947833;0.54596171743352905903 0.65389302151667649809 0.73070898618353496978 -4.9098787793811542457;-0.61782149325674218243 -0.44283763916839180563 4.6937367767378992411 0.83178412164335713275;2.4430406449540709168 2.7477791761329704023 -0.031789246442635143985 -3.2739041108085222831;-0.49947566585111830006 -1.8051260049359993953 4.2621438177012329618 -0.76588528657121990317;-1.761912833425071323 1.4566879980845064413 2.4940095337212517812 3.0467683808449255167;-2.6108818591843667711 1.9200631979144975325 -2.2212511224706017465 2.471396068612798036;-3.1748882385292178654 3.2611210750418715421 1.137012096517420412 -0.25369087363754161402;3.9043721243110880437 -2.3024790552111742414 -1.3084908697247230602 -1.1819288044021714068;2.529081018740573672 -0.52513677516075840668 -1.8470133009451763506 3.6846345400555127192;2.5416663384833317885 -2.0831945958992039714 -3.0578989107267471326 -1.698587288113486915;-0.082877424584129277818 -4.0496230168824745022 3.2359563944883675823 0.38168074041080796155;1.0276645202479419705 0.119163867668384299 4.7379334513387609817 0.42281919062783845931;-1.8225891107188714191 -2.1952120083994492994 1.946103237907067518 -3.1603851834201930338;-4.1839898392855703335 -1.7036858445770703963 -1.6835372658251204214 -0.010790059973115946612;2.796145968512949942 -1.9697419648831406835 -2.3049973422590177563 -2.7710761198291793406;-0.84197381022760919844 -3.0565203111890730803 1.7943037734934139671 -2.9181371598446581572;-2.5181039630967361198 -3.5925161702504597727 1.4322277412587196554 1.2657125512164568715;2.719404282175333698 -1.4154063189732215555 3.8510845223453307185 0.4579333835213581505;0.90385863700068069804 -0.46053414904019446263 4.6270342505550434709 -0.84004081894900928251;-2.4919336622825976058 -3.1809285643876452632 2.3491835610259390599 0.1979730995545335992;-2.2636083498918395662 5.3616843271674783367 -0.13307220050859225324 0.19640264107808805272;-0.75060239200096812162 3.0780446758184076828 -2.7880642414289233955 -2.1832067123207257175;3.0067883134588768712 -0.78342851220468878726 2.978173723960194863 -1.4141915274363283661;3.0734073891814679413 2.3370268079836269415 -0.37953257795514461215 3.0594445073464462403;-2.1376753251848694681 0.22800574528932704421 -2.358552074911460128 -2.6740909424317540477;2.6109679727003052285 3.4441927951710686884 -2.3607936008608465528 -0.24443624388485216126;2.6512366021235020952 -4.565682115120401896 -1.1194260256090580175 1.0203069021635489122;-2.4846579083399005228 3.8853077766975903096 1.5905306902580904627 1.9196306049944453775;-0.36539433987020503158 -2.9858386523784421485 3.3204959914318146197 2.6891236732992243041;-1.1299300406065815316 0.38823644696590114966 3.9829482171374146482 -1.1004320665613904762;1.230222771295278017 -2.8718190154350495824 3.4655801787946325376 0.40178603141842350599;-3.4338560213114943664 1.9502071885838441201 -2.0393789169846896492 -0.96775199320070182107;2.8116715677410528684 1.630606401159978569 2.696725758971296294 0.89884555496457840817;-1.3989513327445199931 1.4716722554872827544 3.3666704447260955568 1.8439780536183798532;3.050894320462277598 1.408069748201588034 -2.9156763166185846181 -1.6080133504225255781;2.8623178446611912129 -2.2104569222096284165 -1.152482389153000053 -2.1302090653216061433;2.5884562233165038236 2.3004230602955550999 2.1403503736111293421 2.0365758597916818751;4.6742354147169873357 -1.2514759674557491831 -0.74221014220219194701 -0.069077646554537922019;-1.573613347922420802 2.8055957507424551522 3.2075765839451730876 -2.1321805354835690061;0.57609470617193259123 4.4868910316948582562 1.5994826575133189728 1.5255671342206718055;3.7260301334064278578 2.7351768250523647019 -0.36257748633252201431 -0.99330370253214750331;-3.3139968413363947164 -3.4070604534250197304 1.6067224025814086374 1.1875197144300215779;-2.3682589875623802911 1.1205942576492207152 3.4169536377409865935 1.9148903769674454622;-4.2578819795320939079 -1.9597470178913345418 2.4250431660720046523 -1.5827767761111399825;3.2176758922993262679 0.85410329101331106116 -2.8167199808350011914 -2.1300475746440881153;-2.3948698864479247561 3.215396890796718754 2.7720663837219965409 -0.16148246111774608447;2.1965255542540584877 -2.4205468122145794574 3.3648082185762975271 -1.7998500366968117614;0.82097791658166208162 -2.9313702158361962802 3.196392634645058628 -0.90064381136819815499;-2.6043399219992693361 1.8628093465771615733 3.3535579236612091947 -0.19913428600081392594;3.1906906757721715806 -2.1013018659705533508 0.77564791634355112482 3.2254165870442585984;3.4326516008192657914 2.7604279428343110325 1.8008261449272626731 1.1194092208490880047;-1.5408864782988074271 -3.7100962765677434341 -1.1273165254148114212 2.5285315061347768406;5.2409036721203898779 -0.36069294080431479887 3.0498397859868249249 0.47930116159857244496;-2.3576900630816459703 -2.764319018124228311 -2.7993115722754100538 -1.1891190977341024038;-3.2312185289817465517 -1.2352725397918939976 -2.3138867351151577445 -2.2817351426256866631;-1.0111653671443563418 2.6459603738962580444 -0.54878322357977238344 -2.7343350055558168776;0.70411842717463390962 2.1834048143548887566 3.2685980514380177375 1.6360183942623691689;-1.7380001693504518734 1.9409504937012180825 3.7613625729933999331 -1.6478885263361504609;2.4693012894137766899 2.4896855997214246692 -3.2494825244839096179 -0.70271513147407393962;-3.6160761832586367781 -0.53739680057026095739 -0.19282684398540678172 -3.0165389457952906938;1.1774028662713116322 2.0037617612404945433 -2.4678321681960411205 -3.9555025307902647036;3.9185849064355200433 2.347770367053771956 -1.4003958218519796386 -0.2724405339122449865];

% Layer 2
b2 = 0.24170021830717181022;
LW2_1 = [-0.22035097003349879419 0.73458619452925910664 0.7062611383425584366 0.17587635630598491554 1.0942273123305676918 0.97979641843530840273 0.32353009610429150911 0.23370538834701132247 0.16784325444302983232 0.048408438539704529147 -0.1581428977405828773 0.68367124784910804358 0.24293081824999857021 0.94452980382089646305 -0.47063602021968270472 0.38914733344590535236 -1.0184385590895237428 -0.35759219092199301393 0.23599181862049312119 -0.45145665567038389954 0.44366844353296069903 -0.17935031219591146545 -0.63741309988745897819 0.12043588364174885597 -0.18654286722496654649 -0.56396295345269986665 0.2833890294599101245 0.44823825594460786625 -0.79690445764157891162 0.079340332423277579177 0.12724709871171865916 0.14961392540845627752 0.30146688501986268482 0.22828834768130068511 -0.1107336888933359853 0.24807388260002985469 0.40495777967281720855 -0.89044462511441435648 0.20096106867743290803 0.0307963115489457602 0.15858724080172464932 0.15044130911707181975 -0.64586564757975095663 0.52851054485814163986 -0.1647419627676138254 0.18998336130882839679 -0.25170288710473481819 -1.0724962010758243292 -0.5868095023888609818 0.30912048765796679151 -0.23504102126233747394 0.045309168339046794471 0.82778364688056327303 0.00049180803350335378261 -0.033852867192483586389 -0.57300213239885455785 0.29241548178072734876 -0.57074770925563045321 0.66369694220319142008 0.38176964430852844412 0.20289274319164860017 0.2855554508095218269 -0.35212677275839648905 -0.18343881203587689144 0.23542431416825163049 -0.15276282357407100498 0.20480627210278157246 0.50100042260462640531 -0.31329340089003171466 -0.78584435530297302996 0.13493746049862589964 -0.24087653999036182095 -0.13948641716479412422 0.37415350481160997154 -0.69044658672753145279 0.40047238937792029034 0.4139577815666901639 -0.10816920153465242604 0.11370947034874347159 -0.83195961776018512168 -0.15086543408190800086 0.40923926149999223512 0.49846079893784994708 -0.063247198652916794548 0.4016655606302360626 0.20033206118378815708 -0.14609130876077403016 0.32696612951350623177 -0.34863734303635240952 -0.98037681643107532636 -0.22840167128855345946 -0.41850562403798174937 0.2801370213282612931 0.16634714350430190866 0.40161502149950717433 0.52344008290771792957 0.052374767019538907842 -0.47374556771730441662 0.48215455521301464614 0.045358167077836269998 0.5341686433977328452 0.13175575079814069723 0.14117729023077565942 0.52353543251879974818 -0.38539668618914946219 0.15046077348537370555 -0.43875671203167154744 -0.68702770692255399343 -1.3938890381438759913 -0.91328363724740702079 0.40085912252702654568 0.77602991382933672604 0.3494871385427660293 -0.091534519352670609682 -0.3569503064724065533 0.31207192284876816846 0.46728802839999428187 0.20586944168615728401 0.19427903073282121182 0.56014250354603711823 -0.57293715648617959957 0.26325701935557649369 -0.12829576164551306783 -1.0545080094805099336 -0.24529865599910022356 0.44776740396681441458 1.2228680311130650793 -0.16074571976561094488 0.60504382293910996538 -0.25374040122872926206 -0.53539335807613330775 1.0670772028384707397 -0.17054657308428622375 -0.30469903573388046336 0.56425401365019356437 0.16901992540880175775 1.1191483355533757837 -0.037558265776533143743 -0.40041560352240590515 -0.44411474511317133862];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 2.66666666666667;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
