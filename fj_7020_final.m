function [y1] = fj_7020_final(x1)
%FJ_7020_FINAL neural network simulation function.
%
% Auto-generated by MATLAB, 08-May-2019 20:08:45.
% 
% [y1] = fj_7020_final(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% With 
%   Row 1: Outdoor temperature in Celsius
%   Row 2: Month [1-12]
%   Row 3: Workday or non-workday [1 = workday, 0 = non-workday] 
%   Row 4: Time of day [1-24, with 24 = 00 is treated as the start of the
%          year, i.e., the first hour of the year has value 24. This since
%          the logged value for that time is primarly between 23 -24 the
%          day before]
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-12.5;0;0;1];
x1_step1.gain = [0.043956043956044;0.166666666666667;2;0.0869565217391304];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.945942830320962269;-3.7700486633931791225;-4.2954378003161979294;-3.7665583731946998824;3.0943972149467389166;-3.2612499119232887246;3.6340811154137613315;3.6908639247473669087;2.3940015882129199731;2.2999068067106032132;3.3085145553348844771;2.7851082650928526974;2.9150326016745489177;-2.8085767522081011016;1.6958990139739684722;2.0838216285000581429;2.2030092173045523474;2.7576084395308995134;-1.1151649604512332559;-1.1190216235417684842;-1.2319906525011428133;-0.6660182384402580924;-1.4489891451880341222;-0.15312741460227655144;-0.74028812946410071927;-0.33229479621882418439;0.28208091203273955028;0.075293086014384530413;0.18207104766179443844;0.46842395727872832012;-0.29940402011082900557;0.45901051965140576838;-0.084186143690975975828;-0.18118383751490510503;0.59978135863173898112;0.92078766164412584327;0.54178457004124147556;-1.5273274336180724386;1.4838583313269355646;0.84811990678188153847;-1.3071085434698903605;2.2451428075689503494;1.7636827242426584839;2.1126399913048854451;-1.5341385654175418995;-2.6663581895108663389;-3.5877051695536903431;2.7465799779238051492;2.4948285023661500581;2.303499138606368124;-2.1803516537509839424;3.0552801521879442426;3.0061724009527783785;-3.5651819611055572956;3.226553400496046109;-3.3630753339795860235;3.9912030359961181425;-3.1414999762863855537;3.3099777388793589772;4.0682245945003838727];
IW1_1 = [-0.6854789211159572071 -2.1407472663034581295 1.1506392178876174714 -2.9768467269122029784;1.5816433978224149204 1.0508575521210485881 -3.7698236866987997473 -0.46356156957833832832;2.516185736126244521 -2.7471251775906662118 1.2202215551023225526 1.321202347532122845;0.63708737990168962106 -2.3734665691067453608 1.7871714941095351303 -2.1301776111135541925;-0.8548251227207239733 0.38058418927964821066 -3.1300894693033609606 -2.5252854337979928623;3.6979551356249191763 -0.31631018873109184586 -2.0028962266942076376 1.4330578038206802649;-2.5707470987704463816 1.3239118672052330172 -0.7383327722689930761 -0.98278372085924947665;-1.8992109698170869247 2.7634900319037232208 1.0682284059402711307 1.6368428465762894231;-0.6571196359433069123 -1.2556202298435519271 -1.0870193640146883496 2.5204707829385335494;-2.717576640399646859 0.28473898541549358399 -3.704019916536893664 -0.20983383847560987956;-2.784114845133593974 -1.3033997898451756825 0.32952706130591641331 -2.1860348295018399156;-3.7307533818838773954 4.1201946757699392521 2.7644036386596924082 0.15712025332442269843;-1.0102776552720176273 4.1171227505613074982 1.1551831573185049606 0.54576651797885611384;0.96670564967290095737 -3.523916367883674905 -1.4318299440134014677 1.7298688047388908196;-1.0779685836822867628 1.0374687576465799754 3.5342807556653172973 -1.3998832717689599914;-2.6378397556296637738 -0.36748628786372966593 -3.0887261611208889356 -0.99603409370726769811;-1.4024664323873312632 1.5016007914194728912 -3.3329481939314535843 -1.9904965137952574938;1.1230927062972617669 -0.95934048283823358805 -1.8367804582919420309 -2.4036006898663133668;3.4688227363128034675 1.5596006335126759712 2.4651586482983489645 1.1483643140213035672;3.0906318226878122246 -1.2868622113958796405 1.162425835059711865 -2.1187888130629035643;0.41561692541370492959 -1.4244105377020110925 2.2723095619697026848 1.6172317903938095984;3.1532423720596822747 2.7850622148241215292 1.6201533932918574799 -0.17137955862108239513;2.8858977413388577915 1.4172367117537125747 -3.8194796234824832659 -0.15294438530713611035;1.6161164590656309503 -6.1581964101758162045 4.8603201420937960364 -0.088153455332353108931;3.779882979332598314 1.2569581687064848019 3.5825658906380244417 0.068391189491466941597;0.79430779186419397941 2.437695269436245038 -3.4026811126295388732 0.60212963914786477027;1.973540490958949345 -1.5125644459695679611 0.10878337075858347804 -2.2105067676562075718;-0.09884921138907701299 3.0557511692579097939 2.1212532857415733467 0.011821504410272156566;-3.1393190728200708328 0.43072926549059442625 -0.39559361067856130267 1.2535641868351286021;0.77605412238698023852 4.3673040083791052623 -0.46350154810501864588 0.37585198977697398259;4.867900162480892412 -1.3447904914247563735 -0.44489468786545061096 -0.65170964820263455053;2.6942581910767757769 2.1239974299205974795 2.2787098389969488998 0.2631235723408413274;0.71114870245964134643 -4.0734618319926347851 3.1052228737036471351 0.026906420344262126088;-1.1128322913906592007 4.0577029711070418116 2.8452245336029364786 0.033172677098096993442;1.9953064773220445804 -2.0651742238031531862 -3.6181799009262736178 -0.34369855794092285528;2.034372413156066095 2.9890334432057232839 -1.7803590404970737193 -0.9110398982341503249;-0.92628889760257293595 -2.8864143124524472839 -3.1108509249996294521 1.3257961672369062978;-3.6975331798242936365 -1.5560791995622125228 2.1301322773067483674 0.64957357520101344228;0.43265680806446932261 0.47112649817098239957 2.7508906183013777103 -2.2715854651840361456;2.2489443525229799725 1.7142757222190330157 -1.2936745547064709694 -1.2167417232837309804;-2.1597983804205731495 3.7963662032288723047 -1.8075228910084557565 1.9077974435972822054;5.1670198189806306743 0.40477629724312030879 2.2115389972735282065 -0.15517813863033275146;3.0321239094483076748 0.075917590056409217647 0.38555344559300408491 2.77703819016122333;1.8432276719898781359 0.78119534894190734153 0.96765480654817648265 -2.89754179631187192;-1.7785401162116101226 -1.7696108761523778874 -1.461801389503037063 -2.2295829205146779906;-1.5156937283261038285 -1.3100120415430518417 -2.4731910873261933048 -1.3590127710746802148;-1.8272207570976226609 5.7761043593303558197 0.88473667372832676126 0.069575224658327022853;2.9625661545904118377 -1.9096115537480218283 -1.4694854453163928021 2.2505661357430435388;0.51520031404607524728 -3.5636922935772101795 -1.9338254103102785475 1.4511588369998786874;2.4499569558300313687 0.0056266438879245947099 1.368614653366881484 2.1240068040073087907;-3.3524175624197702916 3.2410346990564415925 -2.1799785153197044352 0.055746087110288188027;2.1430458996774164326 2.2849597481218988371 1.4671851236404318541 -2.033105370972015713;1.9373272017713361048 -2.5591925071652386059 -1.172012516810486682 1.8023480587310010126;-2.9723170782200218909 1.9121984096987807433 2.0792528762438116097 -1.2523573484739782824;2.3109695326825816508 -1.2996971213237555887 3.1469671195668791341 -1.96024224060756036;-2.6184762784822139814 -3.6011979152123378967 2.0900774594221611657 0.60042730014181500131;1.8834812466103005857 3.0416632957699381024 -0.9403886296941845746 -1.6763230006650844395;-1.665823983325876334 -4.0855874842747272879 -3.0601659219439212301 1.2684043163837721568;-0.27315968468773477174 -3.9176637554708002575 2.420109879047192436 -0.87773144875908637452;0.31397349778702021705 -3.7402269110655343987 2.368409564832576919 0.2616208342734211989];

% Layer 2
b2 = 1.3247845009851373366;
LW2_1 = [0.10675816193420004097 0.73422012967604399769 -0.98755905126779108816 -0.1722802863808217122 0.11339265492867135754 -0.18476249661262261759 -1.3903125023902491719 -0.76503721714085914929 0.38838601613923368072 -1.9749685196054747038 0.2555447545102559892 -1.1623625488150166607 0.91166956886153738271 -0.25781950620313554001 0.37622409429510833556 1.4950639593526080517 -1.3119743871025040249 0.31452721131115130015 0.68228756743018070807 0.27417107756884306902 -1.7060835794363971019 -1.4312453003616423253 -0.63308321350950236273 -2.0174746902912090718 -1.8200907942804340767 0.95647371990736840264 -0.46669371083782890119 1.1516562580932974136 0.53122275013189390602 -0.23451658361718488721 0.264402507343153792 1.3456394393740769289 2.9500790025777798853 -2.1519430784517283861 -2.1210799156827038203 0.5648903249875472099 -0.98483473994530390527 -0.2939414933257400997 -0.37680683146051574539 -0.76737814430236339636 -0.32737043532202464435 -0.35209001937845169072 0.3847976362892928659 -0.14380851055233773161 0.26182474758467022546 -0.66803559068196127768 1.0549695059114048146 -0.6788210651119913619 0.19171092303643000321 -0.62558819440515223143 1.2209170002034153146 -0.30331169209927066888 0.75969345960454837119 0.44023014717741348889 0.96843787923280844065 -1.0101494679166753698 -0.76539479407479904527 0.59633519222735387189 -0.37359879166995424438 -0.26985661761153800775];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 9.52380952380952;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
