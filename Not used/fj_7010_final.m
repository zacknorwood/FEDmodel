function [y1] = fj_7010_final(x1)
%FJ_7010_FINAL neural network simulation function.
%
% Auto-generated by MATLAB, 08-May-2019 19:52:24.
% 
% [y1] = fj_7010_final(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% With 
%   Row 1: Outdoor temperature in Celsius
%   Row 2: Month [1-12]
%   Row 3: Workday or non-workday [1 = workday, 0 = non-workday] 
%   Row 4: Time of day [1-24, with 24 = 00 is treated as the start of the
%          year, i.e., the first hour of the year has value 24. This since
%          the logged value for that time is primarly between 23 -24 the
%          day before]
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-12.5;0;0;1];
x1_step1.gain = [0.043956043956044;0.166666666666667;2;0.0869565217391304];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.1816611055743351244;-4.2609111776082704282;2.9254722654659244263;3.5189972618798237569;3.1695045897656908274;-3.2216720888013661295;3.247407589221015467;2.8135553216278190725;2.5171729838133432011;1.2821810267696969188;-3.9167224879372906088;3.414819286969970058;2.4496346187398163607;-2.5422887446236606124;-2.8369035267755662311;2.0648065606245031844;-1.2709086618884330999;2.6365378931396836748;-1.6257356309328276911;1.2931934026760381062;-0.87348607697221536394;2.3792839354909141036;-0.27507199014001582071;-1.327610075177038107;0.82194702071720859848;-0.82458288224396003585;-0.26472809047916567859;0.76881042971800139796;0.39298174839103816591;0.94308086245194588937;-0.26436012479375403661;0.87694477132799375507;-1.0009852834028691859;0.58958606875650143575;-0.32517518770300041231;1.2673702540229876412;1.0839967730023285508;-0.93197135099163153082;1.8237751276206097817;1.9480634346256922029;-1.4261814075111631794;-2.2766639775649393229;3.1706877497208454386;-2.1833628001903431226;-1.9379592365066848902;-3.5964936021669475785;1.3884698825776300435;2.5914103916492057245;-2.4268103057445338244;-3.7716887140212449481;2.691427887219846049;2.3551188989864244583;-2.6966696846426430056;3.209747260256110124;4.2687354212415424826;-2.9733151595909927956;-4.2730784613479073641;-3.2851850625583502996;4.2832630383630876381;5.5565572639623468376];
IW1_1 = [0.93923244080489531882 0.87237461546344174934 3.1658432053378344762 0.36184192707304796421;2.4994610435115833802 -3.9910220067627961704 1.2148284426711017936 -0.50740811613031133742;-1.6686042071682132271 -2.2414051479368275466 -2.038142863448376918 -2.8733867306984066659;-1.1588230842009952237 0.16015070022265848193 -1.3485493450333583265 4.947440968440244724;-2.5341571347758784505 -3.0655031313502849599 -1.0492760662229443369 1.264551901293058167;4.569223297574238174 -0.63279050461595665045 -2.5652606295501803046 -1.8035225900143319056;-1.8666032127116922723 -1.9433734735385901349 0.88456083226706250233 -4.9432300441127949853;-2.8616990613528288101 2.9148382683071365484 0.31234989164614318513 0.86201628683420750132;-2.589987853618223923 0.49281417159474905088 -2.6164446981442406326 1.3463415537175533743;-0.73966495871867643519 -3.674771859976079913 -0.057300465095589170339 -0.050791599761317834938;2.9166165349097101789 0.93498504356335021548 -2.1232752396397969186 1.9629843362224286274;-1.8609493533698020507 -2.3738932093813556179 -1.6151837645463915649 1.4350215394641794298;-2.5066507065689411782 1.1789001723311185454 -1.911152629897836297 -2.1407435401047631984;2.5084148299434967377 -2.5480717154474059605 -1.9104518756109616362 -2.9190832248528906234;0.70570213069305132159 -0.029513552147897421929 4.727708847857408081 6.4280448234274905062;-3.7939872328181363237 0.66299398004508491855 -2.5426501234062230949 0.95862253624177573563;3.1021437676695726715 4.1516419552906835833 3.4754969117320460015 -0.073716909914251865787;-4.787425939563775934 0.0087539771482424751786 -0.51919128879890985573 0.82044708309533742607;3.5553723582297704908 0.28642092808812169569 1.5364424097503770472 -1.8012367810294955817;-3.6422961541455962653 -2.2751407722880854223 3.7494037168884304378 0.56896764191570614599;2.4215011973033888637 -1.3799609059284476675 0.28126361195801996562 2.5068710105893718953;0.28088612631838655309 -0.98656470189404010807 1.5389121642312273419 -4.6398930871676808962;4.8299180606873788335 2.8278001272259349896 2.014319812769273188 1.747576706142669245;2.3593611639149369985 2.6379262154744358426 3.1348091858067399507 0.30766602572593754195;-3.16566480701464803 3.0272925041393623502 -1.0467779231443770094 2.8896842834891964813;2.4682084480094235168 1.071546498774059275 3.6001371706313487486 0.41054529849477383596;3.3061239025491033772 4.2807701919501859322 1.7998205630888675088 -1.4863257475035824839;-1.079182924668024679 -1.2012538390408120659 1.4211550222619209194 -2.2800469119172008803;-0.93007232281825125142 3.7753213971683243777 -2.8153571638309089487 2.5709435645590015262;-2.2700577302410027691 2.5662574991596951435 -2.4997600123697707453 2.2575734170264443179;-1.6163775470986643246 0.59277026712073765946 -1.2482274587455810533 -1.4044048823263379777;4.0210219576163481747 2.5424342762845779653 -0.071466192094786856748 0.16740924692461983669;1.0685394495663245173 -1.8114733438538925814 4.0768194162968152128 -1.1690599286442278082;1.3184266854174013783 -2.2359995719582528295 2.6194785555922859288 1.1480815702867190886;0.10692357399907012616 0.02440782763478001674 -1.6284985050782998517 -5.5226493749850558146;3.5210770855804738311 0.42450008731120308925 -0.51365576273844104627 -3.0650910776133963864;3.381877851601864382 -1.3724215397199646116 1.052268967388594767 -2.2194105787128268759;-0.1158729888706950123 3.7047901464816068717 0.05130279463932974765 0.10845232169567954605;0.30345070170820670485 2.1606432041105354536 1.7284607524833468517 -3.1259952546496854175;0.28969795984804636024 0.31696830615915289053 0.51319329242735145513 -6.1787080619647838375;-4.4362946370645843785 1.7791212561637756995 -0.35910041883565047005 -1.6854715161031257331;-0.16616496074943867822 -1.3416456615052447798 0.19979976907891197624 4.1330836639522017251;0.94052486678311364443 -4.0800354960043572206 3.3787593885300508667 -1.0961031973299102393;-4.4961968489283101746 -0.61177508742612096704 -0.44164573979349391886 -1.6615300835653152856;0.39464008294623281747 2.8654109748574398964 -1.800928004220510692 1.0067831321450610993;-3.1842061680975355387 -1.7730732215301818755 -2.1551013475885749671 -0.28351726882076810909;-0.46714019325520839132 2.0880352792856244903 0.42510683279661559686 1.1050356900219482359;2.9119833323275563508 -2.5608956359283894244 1.0563561843271853657 -1.1525036240683297351;-0.26323658820570650096 -2.1576419712281444951 -1.2802371366534841535 -2.9755263239075624426;-2.76632709522056075 3.3515993152790373166 2.8180354494805714971 -3.7390654234835163372;0.93144413167857953439 0.96925035644616686081 2.3618795210433400911 1.8217730816117807535;2.0430973370453044957 -1.1164368889862972267 3.4267881585432906633 2.630559357015765265;-2.2366357371785854369 -1.7911444808357128711 -3.8122091141007201642 0.74909876415923437598;-0.26978105347696951233 -1.83430529283066579 1.9893178859201610109 -2.9114857610174884606;2.0068169483513020879 0.96038808032677069892 2.3040235995065372343 -1.6003523688509295742;0.24003204238099379308 0.8777030778318147819 5.4714330879002854857 -6.2055947489762210978;-0.91460238252897219091 -2.7348931266471812052 -2.0450755513824998566 1.5334175238032294875;-2.2241965115341604253 1.7696192340585652492 -2.4806828648522660785 0.67968734052992219041;3.9280851419428053362 -4.0388378341083797096 -2.9024915338765104877 0.065252814606102410577;4.8691661131741659219 3.2284469449485682091 2.7425095985607441662 1.03444892466516003];

% Layer 2
b2 = -1.841112982876180304;
LW2_1 = [-2.3217573120567376321 -0.39107962570009080494 -0.17114322632623932274 -0.24198185164256025281 0.7663717688603882694 -0.33665304717976113347 0.23595553060325119565 -0.87086549300129700857 -1.1810786224646487863 -1.2037704657971921574 -0.80553974073208789441 -1.1041689665575107338 -1.075467838122199149 -0.11061526032402127506 -0.58935426136653934481 0.42395794951398818595 0.85045007371911129912 0.092928391610178989746 -0.2637513624177596494 0.73946206694298799444 -0.8527445843383130164 0.34898750056108351902 0.30099583393130413533 -1.441952545714501488 0.16875987887284724098 -0.70790941558978159875 0.19673488123952695417 -1.6229567253536452132 -0.30123542575509831831 0.56269255879815172072 -0.77590011026138494543 -0.84513925330849770656 1.3782354094674702516 -0.56585973205955053533 -0.99546261235811295265 -0.15010126132451470649 0.26427296857137000385 -0.97850052057906033998 0.12838439148664126943 0.76970659228216331549 0.090483229392052832996 -0.24469588337211994888 0.86300035168180155853 -0.18047805384219839375 0.98013337966787428268 -2.3233561275373930677 0.85491820019109898698 -0.53215258310662605368 0.35585991729980187559 0.14125045478691258816 -2.4765618446433479427 1.0463484731491454749 0.55291228261455338533 -0.64811741162430713814 -0.90865054674032330606 -0.65533648125875543222 -0.52010385155792804301 -0.86638810879512340168 -0.20382547884662716164 -1.0834677921777695619];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 16.6666666666667;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
