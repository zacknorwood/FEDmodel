function [y1] = fj_MC2_final(x1)
%FJ_MC2_FINAL neural network simulation function.
%
% Auto-generated by MATLAB, 08-May-2019 21:58:25.
% 
% [y1] = fj_MC2_final(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% With 
%   Row 1: Outdoor temperature in Celsius
%   Row 2: Month [1-12]
%   Row 3: Workday or non-workday [1 = workday, 0 = non-workday] 
%   Row 4: Time of day [1-24, with 24 = 00 is treated as the start of the
%          year, i.e., the first hour of the year has value 24. This since
%          the logged value for that time is primarly between 23 -24 the
%          day before]
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-12.5;1;0;1];
x1_step1.gain = [0.0436681222707424;0.181818181818182;2;0.0869565217391304];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.9558383526042444345;-4.6486722156378164073;5.1249367125325973049;-4.575441883988933256;4.4626080518778010742;4.2442760865573019302;-4.6650428992342520829;-3.837460927340466732;-4.34604412449914701;-4.2546421154708200518;-4.6112288319462564345;-3.8126354644855129372;-3.8742477983783394357;-3.9160172217544237938;3.9012683810471706636;4.4364654582481986012;3.0075438536315157734;3.4105893163578993033;-4.1080261361140868459;2.7701781429191116857;2.9853806938778753022;-3.6181069985772613684;3.8020397484127603782;3.5267848664860723673;3.4222910114596660769;3.3904149771604705776;-2.6949462325900919168;-3.2862254273300801621;2.6977988778631640798;-2.8037167382030561136;-2.6442809995076643759;3.7685061609224410617;-2.499404900817832953;-2.7620116762179014458;2.260393162672189149;-2.9358466587431362171;2.2836411949000177124;2.6953595964403067597;1.7130470134851072395;1.6272807282972554521;-1.6283823718922756374;1.591210974786726684;-2.0802461170435195825;2.7514661359936458673;1.7219899040819641733;1.4896546209924650395;1.9568834592927799587;1.6344592208163286617;-1.1431062312186506258;-2.25180697987642775;2.0481114336221137862;1.1722204259831199291;-1.6297087419420350773;1.2886969384678270689;-1.688181543309505761;-0.82208366235908747477;1.751478936894164562;0.5966298227585303815;-1.0048193061345533916;-1.2749261581422126621;0.17584104005107711877;0.42364463167532012688;-0.62373570188753468813;-0.72063185271132457199;0.18008270187519134775;0.41493184427946500081;1.5753850570700798084;-0.34320540144361294521;0.078473839121590241441;0.4765761852585079783;-0.22191303736014675319;-0.91787482448847612648;-0.22182947832233126939;-0.45059437279596692427;1.2532993427860119606;1.2654999141222786907;-0.67568253775793463145;0.093936419624396486072;-0.64220707204706206639;-0.13206617260419961646;-0.13574322530196902825;-0.58958431586166293314;-1.9199872968233246961;-0.65491527108522962219;-0.68235961477859874424;1.4211794219391820082;1.6720952754620166392;-1.6100477788187184114;-0.64526003255400354863;-0.87293312330294270396;1.5966724005166545997;-0.84777078599890620669;-2.4192713627570463508;1.3383625031510339998;-1.9075120425032392468;2.0303979178787918691;-2.5602902909604661197;1.8797517789507909303;-2.1835833691228447861;3.3533118042984928486;-1.342510891988720978;-2.3023855177371950198;2.3097649868681213725;1.9887607564856535358;2.7819128426951484911;1.8238905190555714242;-2.8371505211567025206;-2.1649378645248185116;-1.6537805733137391773;2.6608290549898723221;3.1227318034061060104;-2.3023302972970878244;3.0416294488825719178;-3.9535611183611090169;3.2378593332856508979;3.7370609286549449912;-2.4630631448125641647;3.1978307546311079967;-3.9401615014329460784;-4.2846890253390501613;-3.8191799681486764406;-3.6085889855597037545;4.0039283131548879524;4.3147600197132325306;-4.176823841367307999;-4.2871825126736142764;-4.5487721486608965193;3.8741863206258222441;4.2767512331997581398;-4.4997877809752759859;4.5032481891833198162;4.5849609761171254974;-4.5097622022826255872;4.9328000289477076379;-3.5880499312221800778;4.6039612459726173554;-5.3106742293920055076;-4.1055641849081752071;-4.6509851349058850545;4.8195980946470520223];
IW1_1 = [0.9932073215298243829 3.372675134183741541 -3.4734597088566370182 -0.14845130950896101574;3.2651725631763315327 0.82362261494755673041 3.3453578545314308634 -0.58089868683642909009;-3.2209001020334815379 0.86746311659931751858 -2.297819144834371663 -1.8726473499113380772;2.7166371889279332663 4.125560504352968394 -1.1656492586329232353 0.36004096974141686083;-3.7542046889728704073 -1.9294915614003449456 1.6176329417887376216 -0.44843422443791347565;-3.218927185114944578 -1.048995192454375891 2.4469021916243329784 -2.4113752386922051585;0.52871608899797406522 -4.3457160301770016986 -2.2046911531017050478 0.11235792160215858637;0.088685856518641678625 -3.318572242013174467 -2.9155746595069125249 2.9462796126506729522;3.6047797648704356099 -0.58270787361791576142 3.1171255177217966903 0.21133517215899774722;0.50233061782025412167 -3.1976858748020551282 -2.7839286730742354159 -1.3958393890542004634;0.74665862900983059891 1.8895569206724911471 -2.4792448264702184879 2.8705664450833232593;1.2145347096615939364 1.9750840566278031751 -1.797101424475425091 4.2113471136661511096;1.4267044569831528467 2.8821393096930796318 2.3052972910159632569 1.7959785688084262123;2.108122264305499538 4.1530091880595740861 1.9342606262936092865 -1.5316804972281627961;-1.4481147740927040601 -3.9510154936032417794 -2.8699101070641384048 2.6742055795232317905;0.21702270764841588568 -0.46563549452331692846 -1.5208048699674689974 6.4941562459315429479;0.12952789672426137657 -2.3009069324324626926 -1.3947758544539730075 4.3144770331296431465;-1.614952472909063852 1.382931715360903091 3.5514701239813182276 2.9125071253556882311;3.538991964663548373 1.9040950823242130951 2.2060562224686681709 -3.1440691638194286917;-1.5205253896458270635 -2.5756936601213329396 -2.681891973894451553 -3.0508768974991999912;-0.62115304494946288472 4.8068075625093973358 -2.6745295884382422891 -0.18098601211287540513;4.1559781604017000944 -0.93223159659926624343 2.3477881723244196088 -1.4272012019951831885;-0.15874718533592269143 3.3145272703764900868 -3.5522589484985878094 1.9695144440730734114;-3.6909549507164607363 2.8589626786597484021 -1.9595067240548980081 -2.030425813292027204;-0.47338608281190397431 -4.1431172929931223692 -1.9253230928741951189 -0.38091569414951609307;-1.5197337948910765171 -2.2467542945245120301 -2.6129957045394687221 1.1489783852050787782;3.1301753674354553247 -4.0522442345028304445 1.980972372287558958 -0.85681876292355740876;0.24518826273422494877 -1.1431092179725497182 2.8855199927946371119 -2.2500535550643432359;-1.6387847106125039698 2.3034020682261120427 -3.3117074354581861328 -2.3705262419610519942;5.3365966573181511379 1.3623714996945428535 3.7059435304808898692 0.56019670084089623341;0.6457318562375408133 1.5908440332565161324 2.4529722175915451565 -2.7110063406775739558;-0.75530009347302451417 2.2539320140938547965 -2.8354249286579067402 3.7226705226022280826;3.9046290252074187244 -2.620893153140535059 -3.6451716414076833495 1.2500525159130337904;1.8954750314082509099 -1.1779641471759951799 -2.3617011458085217512 -3.7473985398501485911;-2.3023676862128579224 -3.7641913447188488639 1.569979127281759812 0.5190606957040592162;2.4921608251795208666 3.9676142789410260292 0.011371395896881422716 -3.4549986925589366571;-6.5598555667794098412 1.6547990936378693672 -2.0746105549244946431 -0.81699743524082779622;-2.913286175185925142 -2.6679339734722331556 3.0908357820322702736 -2.2179766068230768461;-2.7823782173687701125 3.3033560680941214116 1.2513707494825163646 -1.52448116087845853;-4.5742753251582950469 3.1734675639346301423 -0.10979836760283889774 -0.061071262005942442141;2.0816453621774035909 3.0395794477376529841 1.667676746157195522 1.97786493587554979;-2.9615134658523394329 1.5924787462396194915 2.3661162618038757977 2.3474545914196816021;2.3321937002619792523 2.3781879058193129417 1.6823607428865148261 -3.032698336843825615;-4.4393069693299072043 0.40096526394626541556 -2.3437939328163821529 0.83328821403320096906;-3.3656787547193953714 -3.5941065018487479144 0.66061920455142975062 -0.95100028910152434314;-2.6120019252037596225 -4.3723520508537276896 -2.4293466367191838273 0.13825413028864891318;-1.2169340633535215002 0.18879394605607072166 3.4116123631947163908 -2.9658780196120160255;-4.6460822956241960568 2.4763609847812610987 2.4897073930154198784 -0.88545906102533122883;3.8950529720300814951 -2.0011021681379665971 0.18184204799564016031 3.0170821389211561758;0.80150741748300668998 3.4820738146669949487 3.8763406291012891813 -3.226951806863174621;-3.1040169014083778265 -1.1466538760233135896 -1.8311159188408612231 2.161145214230763667;-0.51133809002907149033 3.6332247761292681965 2.2936302787008364668 -1.5083298290703535116;0.37637390344761773031 -4.4674378753185717272 1.3052739750108148797 -2.0795839036158998425;-1.8070625125659021126 2.0453376269393945819 1.9299778809105399002 0.69395839005461301685;-0.32387332833820031697 -5.4261469143332243803 3.4315452444017533473 0.15231496778168346351;1.6119755437627671935 -0.22571927889773074627 -0.68318574295199152591 -4.8361432668747967867;-1.8734769507648523224 1.9084251517308110646 2.9869222275826130542 1.9977439694324081731;-0.93111340154756516707 -3.5251736677839247136 -2.5554616440914208475 0.90798289609798854549;3.0786127242135807869 1.9580641903985540608 3.517967807258104429 -2.6060588950889398419;1.2053985701178016043 -3.3721378460076887329 2.2000726428317887162 -2.4431616247134466668;-5.6299829928673839063 -0.22268340290066973575 -3.8810592138846478072 -1.3572334257264313528;-4.1545960709966536228 -2.0951537902825720927 -2.5005532973541266806 1.0719924705720802471;2.3025234195112820323 1.7688454056895508426 0.5603297903065218577 -2.6320285260947842154;2.6932216793052368153 -3.279198928092173837 2.8343367580550498097 -0.80727684221894291383;-4.9726408609482017908 0.79329769056645127456 -3.4544922741420482915 -0.27353425086875743366;-2.7836918707648554694 1.6301085124591874198 -0.52027650876996300866 -2.504528193205457498;-0.92434429084315916647 2.0183941998643191162 -2.6877482036469326765 -4.1085049079882098866;1.1734842283446635935 -0.32413814948402175364 4.498532600385551028 1.7349320814045525729;3.2665035489298541727 -1.7896277168263639012 -0.17617427002208793652 -1.5569732694538644946;-3.7788812780122444934 2.9772844625195511448 -1.8589296237735264405 1.94187478478043829;2.1940705638367488106 -2.1414193263122478506 2.5026284128861862044 -1.6362444569144205531;-4.934001047397216233 2.7889680110374199806 -4.175688241678307655 0.0040759950299410104002;-3.2476143892818840619 1.4517051000366989477 -0.1220200797514015556 -1.4670283735394413771;1.6147045204919676653 5.7959055500697580499 1.9198394126010387417 -0.28839471471827016202;2.1675145098781141151 -2.8461806756872141122 -3.279110026013808632 2.0401647107210254539;7.0214898468756841154 0.085479555503447213205 -0.1779781818343182942 0.036992982829455164917;-1.7688409367736954714 -4.2002039936176132073 2.7988451793520452426 -2.4881944359798588984;-3.9886270054555108544 0.08901151549234820326 2.0771232806397268433 2.863851523021001988;-2.5434695170654082474 0.81496923228692441654 -0.58666393922216120149 3.0296100011571254207;0.23272005006553828088 -2.401636164029143039 -3.5325156121127379016 2.1704121227519994619;2.7578027778252365287 -4.1295270336012102064 0.11809969081717139328 1.4272596007244098271;-2.2115363380716859254 -3.3327689028623437295 -3.3324961038609943742 -1.6258928314230891576;-3.4117228580960516915 1.3393171647728059348 1.67615909960131515 -1.7238149771415456346;-2.0526981843544689355 0.49924895805364843948 4.3346793090921824643 0.78341065105037388516;-2.0236220834220692844 1.4050231854904446926 3.9763430829096573227 -1.543422743646883033;4.7314006316167258603 1.3844958888210254777 -1.628143669447892572 1.4554802331865643872;-0.053731492152474517876 -1.6035018491694155163 3.3073059050123361224 -2.8844510280842423633;-1.8159546935953232438 2.69319996514021609 3.2454756135255706795 -2.0922183111439744962;-2.3837952002354922953 2.9184417511707558823 3.5059193614447767828 2.1108124628024951264;-3.9015273051811152349 -0.61369354353384431011 1.795624471468129979 4.1340704371190772903;4.6221489351470044227 -1.0974044711363759586 -2.8204835331162727563 -1.6627123842225413064;-1.5574099761457442792 3.5491533570269333531 1.2244689784863642679 3.9044103548299666784;-2.1800623102430267686 -4.343778842118644512 -4.1665555631053203811 -0.084431611603023079549;2.5778854897416283443 2.2052644878432672293 -1.3299590133952938764 3.1395799779474455882;-3.9045179013982838079 -3.0488493983390649866 -1.4590802105904403518 1.4831519176938376958;3.296605063307771033 -2.5272854365720318626 2.8181158987559467022 -1.8615027768632539384;-2.9314241243348604371 2.8630441173223726281 1.9226456930653770261 -3.2835403808995580199;2.3058442947880259943 4.5380855238871955493 -2.9584416939420310477 -1.3639964460065803209;-2.0310350751190653362 -2.4717101845009468164 2.9066052713215353442 3.6660445694866434785;3.1670180402200829306 -2.6103660052050785545 -3.2294166822432379682 0.35884017173981480608;-0.38276239046211607553 2.4811444193199614361 1.1348621244082399695 3.9414542478656660052;-3.4257823033164718218 2.6940751578732133886 0.93450732081152376729 -2.519361050097500776;2.8605741541002607242 3.2626293923018727661 -0.87036687054196992808 2.3694928472594654068;3.5898324535512702305 -0.30258817847710839377 1.0294792167475659284 3.1549877921309490425;3.3768199402798493303 -1.7171625132193111263 1.3274673440894455556 2.6478745780009855793;1.9649870822843698015 1.3709946343507550814 -4.8231533409199149887 1.1645819717789982484;-5.7890190499400446811 3.2600875334555761142 -3.0625530038121921983 -1.5311288998147847273;-2.9506189456998885845 1.3341027100890612278 0.098032194615078005473 -2.8696304710473379274;-1.6192960945297840691 -3.9198082361177934985 -1.5219422305020149366 2.441517816289089815;4.1111154346999034814 1.5386017518448187325 -3.0781769637747258272 -1.5412830602585951834;0.6146055912532146781 3.0093533352792882773 -1.7490459835643612507 3.7230154803334194469;-0.49413705189604567591 0.36392296099503246287 4.3671153817225301097 -3.9344612759606913954;2.57716203792140508 3.2093814568875331794 1.4266174781624667567 -3.0085177553062449896;-2.166402173506936979 -1.7657942883950099588 -3.7770127281013747833 2.8131751770543180768;4.2932489053314144556 -1.2912677865629609286 -1.1868750180355516211 1.3524098417142607076;2.1028942076870622557 1.4928748730262939581 -1.1918946007848925106 -3.7519963502828583835;-3.9123848517893820009 -3.105450962486084876 -0.45657370640710970289 -1.5928648062959827048;2.6670184078006506923 1.7196559031504861093 2.724967462822641906 3.1364994118405622459;-2.4987344083916585014 2.3231862796920479397 -1.9111276028951602601 3.1190545920327599205;-3.1847178765080816909 3.0996915045353836682 2.5284899787983565744 0.086152965695468430862;-1.8584146482225436525 -0.30625008876588077911 2.7407288639120275242 -3.9117153392276708956;-1.0563297033994838436 -2.7854003714724107077 2.4443338677316357455 2.7153433569892215793;3.1059438350889529978 0.99808721030265412644 -3.8856252019077888171 0.67999782435613176368;4.0107790639123424015 -0.69699452656315508126 -2.9021050650752413524 2.6216393370018549192;-5.6861919440064152553 -1.5343176245463476803 3.1724884700738136267 -0.31867535917867878537;-3.3579002270843893996 1.8434809029522090107 -1.533486536289240032 -2.4364092505896524088;-2.8441279461031254705 2.2394735520193718159 -0.11240047727349476714 1.9559521292986148389;2.9792333160360433553 -0.57569155330600274567 2.0919971156549470592 2.7637590160299820852;4.29154567936533482 0.45826831230786407856 -2.0955190498735278837 -1.5834072458335666234;-0.51147193078844122027 3.3481674698921679578 2.3865386188914463617 1.8477120625243985685;1.3978025768506967541 -4.2998231133279762872 -1.9897478730905335809 1.6626138279845432688;0.77264692549536517774 -4.4269336667387255702 -1.9220702504945783584 1.8880768132833174455;-1.6701433454601744 1.2996530848479115328 -3.5351524604852735401 -1.9604799218422135354;5.0037171131670534763 -2.7818209123770394342 -1.3486628369634197089 1.3122080988930799883;-1.6159993053783434647 1.5381968338423830378 -2.9520309894470524448 3.8175033776475628677;3.098558347741091179 1.5033137864015799767 -1.0937750626623921058 -2.6266195338694555694;-3.7943984406634863049 1.7658121889546456451 2.2405556594680442473 3.2810343101441756808;-4.5175484145544952952 -3.5755145172949940324 2.2130074788774445338 0.16821926715983051559;-3.5636671367249670439 -1.8383571779185365891 1.9714640058849812743 2.4611313309020461659;2.8926559704742937917 0.35249085225853632464 2.9391630546722846695 -2.6480914098318057981];

% Layer 2
b2 = 0.12660136956742859549;
LW2_1 = [-3.3026031953198025093 -0.97890471924057143038 -0.13622424822587911319 1.7262126866888183319 -0.88484582588996441022 0.16732856528553699538 -0.29419013478203409617 -0.14918219537373481054 0.94748818360586339882 -0.38374297961020298331 0.34695473403758686493 0.074523561711569763499 -1.8767423550364066287 -0.22207854259699447153 0.43084916063535860786 0.13849554881506023762 -0.23833048597473954766 0.77199224458886994693 -0.28887611188261280715 0.45791544447476978386 0.57197255681177816555 0.52320920618983579597 0.9097004497701375314 -0.16635229951416447003 0.48810253162702377239 -2.0548309532952178103 0.26099322448355666282 -1.7575184474162290904 -0.42322076544330022863 -1.6037929875111998079 0.57012641976779510067 -0.56988414171794743446 -1.3615892870985881746 0.44220452655075920267 -0.40332890962037643012 -0.24355568068730293341 -0.28751710486559445279 -0.15853495934491301789 0.38613885928859925656 0.34809405004561655428 -0.35429855285119732367 0.53024124419999363322 -0.27729432674743126341 0.29336488292126838839 -0.17183521586059585795 1.1431744919490582912 -1.0838855441700971927 -0.47328507296270000415 -0.18997411058980534504 0.74660766394172239924 -0.65601008236375923932 0.3551270934404565649 0.44012651025242771619 1.359396314824306895 -0.64458635492064408901 -0.094469833494894170367 -1.9583592623519525677 -0.82368360718209232552 -0.76336846065259422733 -0.36947225635279967726 0.49108127773032389518 0.30461257384866458064 -0.43285266824884210957 0.258756671065597188 0.2286353705213719778 -0.29979814644765739873 -0.12109986868585802255 0.63157683096702321723 0.6889794008616844101 -0.40035759386561226014 0.88515345074148410465 0.36292662261097119458 -1.2608996907115483932 0.86942007551041800006 0.60124326570944264247 -0.18506109326022937567 -0.66872617154599389711 -0.28569397242070565524 0.2935650759319241021 0.34606613345361614265 0.23781166034461720393 0.16055659732481569746 0.58699128996252836199 -0.23221533109425129826 -0.67597687817393903309 -0.26797347391213915957 0.24421934806021730613 0.41404420881324760506 -0.24643098156510523378 -0.11714171722618332838 -0.38248793090659843896 0.23288675698206931508 -0.86563993844758868601 0.19062647723713579961 -0.18936371845804525482 0.50561355418411224605 0.37699684519648496428 -0.34010762575189951162 0.23179897541333938094 -0.9652334241693295569 -0.46731298458271491869 0.44720276150861171249 -0.33292048135952628796 -0.34136365264289469934 0.94264215022237429764 -1.362814012992984658 0.38260695688300294659 -0.60353402700067659836 0.17351436055447633233 -0.27062585231701835609 -0.25287739225114719277 0.1610526617374516134 -0.27032802588944471189 0.40611434934946849529 0.88535786168186092482 0.18115720978114766004 0.18604135262520749006 -0.24642683474081866768 0.62310400538173416063 0.78058272597052136277 0.2680338173761063203 1.3321118457377632005 1.0235230861130224511 -0.4178578774014163888 -1.6684695904396138477 -0.85721123969949186705 -0.18166189706277088844 -1.0398303861918993807 -0.70020507430052436604 0.6081390139965513475 -1.4211615046653174321 1.5526938853790179795 1.6867554430947686583 -0.78648229840677130742 -0.70099259516457890218 0.35068307274817500652 0.28125311051966750409 0.5143605275101772456 -0.89524640718703463182 -0.74896079056042286215];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.961538461538495;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
